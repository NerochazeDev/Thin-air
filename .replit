modules = ["nodejs-20"]

[nix]
channel = "stable-25_05"

[workflows]
runButton = "Fix Dependencies and Deploy"

[[workflows.workflow]]
name = "Project"
mode = "parallel"
author = "agent"

[[workflows.workflow.tasks]]
task = "workflow.run"
args = "Hardhat Development"

[[workflows.workflow.tasks]]
task = "workflow.run"
args = "hardhat_test"

[[workflows.workflow]]
name = "Hardhat Development"
author = "agent"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "npm install && npm install --save-dev @nomicfoundation/hardhat-toolbox @nomicfoundation/hardhat-ignition ethers hardhat dotenv chai && npx hardhat compile && npx hardhat test && echo \"‚úì Smart contract compiled and tested successfully\" && echo \"Available commands:\" && echo \"- npx hardhat compile (compile contracts)\" && echo \"- npx hardhat test (run tests)\" && echo \"- npx hardhat node (start local blockchain)\" && echo \"- npx hardhat run scripts/deploy.js --network hardhat (deploy locally)\" && echo \"Development environment ready!\""

[[workflows.workflow]]
name = "hardhat_test"
author = "agent"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "npm install && npx hardhat test"

[[workflows.workflow]]
name = "Fix Dependencies and Deploy"
author = 45985866
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "rm -rf node_modules package-lock.json"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "npm install"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "npx hardhat compile"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"‚úì Contract compiled successfully!\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üìã Deployment Options:\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"1. Local deployment: npx hardhat run scripts/deploy.js --network hardhat\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"2. Polygon Mumbai testnet: npx hardhat run scripts/deploy.js --network mumbai\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"3. Polygon mainnet: npx hardhat run scripts/deploy.js --network polygon\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"‚ö†Ô∏è  For testnet/mainnet deployment, add your PRIVATE_KEY to Secrets\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üí° The contract will automatically forward all MATIC to: 0x15E1A8454E2f31f64042EaE445Ec89266cb584bE\""
